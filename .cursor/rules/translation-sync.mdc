---
description: 
globs: 
alwaysApply: true
---
# Translation Management Rules

## Structure
- Each app in the `@apps` directory should maintain its translations in a `messages` folder at the root level
- Translation files should be organized as follows:
  - `messages/{locale}.json` - Main application translations
  - `messages/zod/{locale}.json` - Zod validation translations
  - Example: `apps/codehouse/messages/en.json`, `apps/codehouse/messages/nl.json`

## File Organization
1. Organize translations by component at the top level
2. Use sections to group related translations within a component
3. Nest values under sections when needed for organization
4. Only create deeper nesting when:
   - There are multiple sibling translations
   - The component's complexity requires further organization
5. Example structure:
```json
{
  "contact-form": {
    "title": "Make an appointment",
    "form": {
      "name": "Name",
      "email": "Email",
      "message": "Message",
      "submit": "Send",
      "validation": {
        "name": {
          "required": "Name is required"
        },
        "email": {
          "required": "Email is required",
          "invalid": "Invalid email format"
        }
      }
    },
    "alert": {
      "success": {
        "title": "Thank you for your message!",
        "description": "We will get back to you as soon as possible."
      },
      "error": {
        "title": "Could not send message",
        "description": "Please try again later"
      }
    }
  },
  "hero": {
    "title": "We build websites and webapps for you and your business",
    "description": "A tech stack to deliver effective and efficient solutions for your business.",
    "contact": "Contact us to plan your next project!"
  }
}
```

## Synchronization Rules
1. When adding new translations:
   - Add the translation key to ALL locale files (e.g., both `en.json` and `nl.json`)
   - Never leave a translation key missing in any locale file
   - Use placeholder text (e.g., "TODO: [key]") if translation is not yet available

2. When modifying existing translations:
   - Update the key in ALL locale files
   - Maintain consistent formatting and structure across all locale files
   - Ensure the meaning remains consistent across languages

3. When removing translations:
   - Remove the key from ALL locale files
   - Do not leave orphaned keys in any locale file

## Best Practices
1. Use TypeScript for type safety:
   - Define message types in `global.d.ts`
   - Use the `IntlMessages` interface for type checking
   - Example: [global.d.ts](mdc:apps/codehouse/global.d.ts)

2. Translation Usage:
   - Use the `useTranslations` hook from `next-intl` in components
   - Reference translations using dot notation: `t('feature.component.key')`
   - Example: [contact-form.tsx](mdc:apps/codehouse/src/app/[locale]/sections/components/contact-form.tsx)

3. Validation Messages:
   - Keep Zod validation messages in separate files under `messages/zod/`
   - Use consistent error message structure
   - Example: [zod-error-map.ts](mdc:apps/codehouse/src/app/utils/zod-error-map.ts)

## Configuration
1. Locale Configuration:
   - Define supported locales in `i18n.config.ts`
   - Set default locale
   - Example: [i18n.config.ts](mdc:apps/codehouse/i18n.config.ts)

2. Message Loading:
   - Use `getRequestConfig` for loading messages
   - Combine main and Zod messages
   - Example: [request.ts](mdc:apps/codehouse/src/i18n/request.ts)

## Maintenance
1. Regular Checks:
   - Verify all locale files have the same structure
   - Check for missing translations
   - Ensure consistent formatting
   - Validate JSON syntax

2. Tools:
   - Use JSON validators to check syntax
   - Consider using translation management tools for larger projects
   - Use TypeScript for type checking

## Common Issues to Avoid
1. Missing translations in some locale files
2. Inconsistent key naming across files
3. Orphaned translation keys
4. Inconsistent JSON formatting
5. Missing type definitions
6. Hardcoded strings in components

Remember: Always keep translations in sync across all locale files to maintain a consistent user experience in all supported languages.



